---
version: 2.1

description: basic feedyard circleci pipeline commands and jobs (feedyard conventions)

commands:

  decrypt-env:
    description: decrypt env file
    parameters:
      encryption-key:
        description: Encryption key
        type: string
      encoded-file:
        description: Name of local, encrypted file. Defaults to env.ci
        type: string
        default: env.ci
      decoded-file:
        description: Name pf decrypted output file. Defaults to local.env
        type: string
        default: local.env
    steps:
      - run:
          name: decrypt local file
          command: openssl aes-256-cbc -d -in << parameters.encoded-file >> -out << parameters.decoded-file >> -k <<parameters.encryption-key >>
